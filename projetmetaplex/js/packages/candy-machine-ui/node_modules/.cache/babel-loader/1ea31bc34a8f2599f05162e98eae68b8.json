{"ast":null,"code":"import * as anchor from '@project-serum/anchor';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { SystemProgram } from '@solana/web3.js';\nimport { LAMPORTS_PER_SOL, SYSVAR_RENT_PUBKEY, TransactionInstruction } from '@solana/web3.js';\nexport const toDate = value => {\n  if (!value) {\n    return;\n  }\n\n  return new Date(value.toNumber() * 1000);\n};\nconst numberFormater = new Intl.NumberFormat('en-US', {\n  style: 'decimal',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2\n});\nexport const formatNumber = {\n  format: val => {\n    if (!val) {\n      return '--';\n    }\n\n    return numberFormater.format(val);\n  },\n  asNumber: val => {\n    if (!val) {\n      return undefined;\n    }\n\n    return val.toNumber() / LAMPORTS_PER_SOL;\n  }\n};\nexport const SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID = new anchor.web3.PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');\nexport const CIVIC = new anchor.web3.PublicKey('gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs');\nexport const getAtaForMint = async (mint, buyer) => {\n  return await anchor.web3.PublicKey.findProgramAddress([buyer.toBuffer(), TOKEN_PROGRAM_ID.toBuffer(), mint.toBuffer()], SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID);\n};\nexport const getNetworkExpire = async gatekeeperNetwork => {\n  return await anchor.web3.PublicKey.findProgramAddress([gatekeeperNetwork.toBuffer(), Buffer.from('expire')], CIVIC);\n};\nexport const getNetworkToken = async (wallet, gatekeeperNetwork) => {\n  return await anchor.web3.PublicKey.findProgramAddress([wallet.toBuffer(), Buffer.from('gateway'), Buffer.from([0, 0, 0, 0, 0, 0, 0, 0]), gatekeeperNetwork.toBuffer()], CIVIC);\n};\nexport function createAssociatedTokenAccountInstruction(associatedTokenAddress, payer, walletAddress, splTokenMintAddress) {\n  const keys = [{\n    pubkey: payer,\n    isSigner: true,\n    isWritable: true\n  }, {\n    pubkey: associatedTokenAddress,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: walletAddress,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: splTokenMintAddress,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: SystemProgram.programId,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: TOKEN_PROGRAM_ID,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: SYSVAR_RENT_PUBKEY,\n    isSigner: false,\n    isWritable: false\n  }];\n  return new TransactionInstruction({\n    keys,\n    programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n    data: Buffer.from([])\n  });\n}","map":{"version":3,"names":["anchor","TOKEN_PROGRAM_ID","SystemProgram","LAMPORTS_PER_SOL","SYSVAR_RENT_PUBKEY","TransactionInstruction","toDate","value","Date","toNumber","numberFormater","Intl","NumberFormat","style","minimumFractionDigits","maximumFractionDigits","formatNumber","format","val","asNumber","undefined","SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID","web3","PublicKey","CIVIC","getAtaForMint","mint","buyer","findProgramAddress","toBuffer","getNetworkExpire","gatekeeperNetwork","Buffer","from","getNetworkToken","wallet","createAssociatedTokenAccountInstruction","associatedTokenAddress","payer","walletAddress","splTokenMintAddress","keys","pubkey","isSigner","isWritable","programId","data"],"sources":["C:/Users/Guerraz Yohan/Desktop/metaplex/js/packages/candy-machine-ui/src/utils.ts"],"sourcesContent":["import * as anchor from '@project-serum/anchor';\r\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\r\nimport { SystemProgram } from '@solana/web3.js';\r\nimport {\r\n  LAMPORTS_PER_SOL,\r\n  SYSVAR_RENT_PUBKEY,\r\n  TransactionInstruction,\r\n} from '@solana/web3.js';\r\n\r\nexport interface AlertState {\r\n  open: boolean;\r\n  message: string;\r\n  severity: 'success' | 'info' | 'warning' | 'error' | undefined;\r\n  hideDuration?: number | null;\r\n}\r\n\r\nexport const toDate = (value?: anchor.BN) => {\r\n  if (!value) {\r\n    return;\r\n  }\r\n\r\n  return new Date(value.toNumber() * 1000);\r\n};\r\n\r\nconst numberFormater = new Intl.NumberFormat('en-US', {\r\n  style: 'decimal',\r\n  minimumFractionDigits: 2,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\nexport const formatNumber = {\r\n  format: (val?: number) => {\r\n    if (!val) {\r\n      return '--';\r\n    }\r\n\r\n    return numberFormater.format(val);\r\n  },\r\n  asNumber: (val?: anchor.BN) => {\r\n    if (!val) {\r\n      return undefined;\r\n    }\r\n\r\n    return val.toNumber() / LAMPORTS_PER_SOL;\r\n  },\r\n};\r\n\r\nexport const SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID =\r\n  new anchor.web3.PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');\r\n\r\nexport const CIVIC = new anchor.web3.PublicKey(\r\n  'gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs',\r\n);\r\n\r\nexport const getAtaForMint = async (\r\n  mint: anchor.web3.PublicKey,\r\n  buyer: anchor.web3.PublicKey,\r\n): Promise<[anchor.web3.PublicKey, number]> => {\r\n  return await anchor.web3.PublicKey.findProgramAddress(\r\n    [buyer.toBuffer(), TOKEN_PROGRAM_ID.toBuffer(), mint.toBuffer()],\r\n    SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\r\n  );\r\n};\r\n\r\nexport const getNetworkExpire = async (\r\n  gatekeeperNetwork: anchor.web3.PublicKey,\r\n): Promise<[anchor.web3.PublicKey, number]> => {\r\n  return await anchor.web3.PublicKey.findProgramAddress(\r\n    [gatekeeperNetwork.toBuffer(), Buffer.from('expire')],\r\n    CIVIC,\r\n  );\r\n};\r\n\r\nexport const getNetworkToken = async (\r\n  wallet: anchor.web3.PublicKey,\r\n  gatekeeperNetwork: anchor.web3.PublicKey,\r\n): Promise<[anchor.web3.PublicKey, number]> => {\r\n  return await anchor.web3.PublicKey.findProgramAddress(\r\n    [\r\n      wallet.toBuffer(),\r\n      Buffer.from('gateway'),\r\n      Buffer.from([0, 0, 0, 0, 0, 0, 0, 0]),\r\n      gatekeeperNetwork.toBuffer(),\r\n    ],\r\n    CIVIC,\r\n  );\r\n};\r\n\r\nexport function createAssociatedTokenAccountInstruction(\r\n  associatedTokenAddress: anchor.web3.PublicKey,\r\n  payer: anchor.web3.PublicKey,\r\n  walletAddress: anchor.web3.PublicKey,\r\n  splTokenMintAddress: anchor.web3.PublicKey,\r\n) {\r\n  const keys = [\r\n    {\r\n      pubkey: payer,\r\n      isSigner: true,\r\n      isWritable: true,\r\n    },\r\n    {\r\n      pubkey: associatedTokenAddress,\r\n      isSigner: false,\r\n      isWritable: true,\r\n    },\r\n    {\r\n      pubkey: walletAddress,\r\n      isSigner: false,\r\n      isWritable: false,\r\n    },\r\n    {\r\n      pubkey: splTokenMintAddress,\r\n      isSigner: false,\r\n      isWritable: false,\r\n    },\r\n    {\r\n      pubkey: SystemProgram.programId,\r\n      isSigner: false,\r\n      isWritable: false,\r\n    },\r\n    {\r\n      pubkey: TOKEN_PROGRAM_ID,\r\n      isSigner: false,\r\n      isWritable: false,\r\n    },\r\n    {\r\n      pubkey: SYSVAR_RENT_PUBKEY,\r\n      isSigner: false,\r\n      isWritable: false,\r\n    },\r\n  ];\r\n  return new TransactionInstruction({\r\n    keys,\r\n    programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\r\n    data: Buffer.from([]),\r\n  });\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}