{"ast":null,"code":"/* eslint-disable no-continue */\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable no-param-reassign */\n\n/* eslint-disable no-prototype-builtins */\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar errorClasses = {};\nvar deserializers = {};\nexport var addCustomErrorDeserializer = function (name, deserializer) {\n  deserializers[name] = deserializer;\n};\nexport var createCustomErrorClass = function (name) {\n  var C = function CustomError(message, fields) {\n    Object.assign(this, fields);\n    this.name = name;\n    this.message = message || name;\n    this.stack = new Error().stack;\n  };\n\n  C.prototype = new Error();\n  errorClasses[name] = C;\n  return C;\n}; // inspired from https://github.com/programble/errio/blob/master/index.js\n\nexport var deserializeError = function (object) {\n  if (typeof object === \"object\" && object) {\n    try {\n      // $FlowFixMe FIXME HACK\n      var msg = JSON.parse(object.message);\n\n      if (msg.message && msg.name) {\n        object = msg;\n      }\n    } catch (e) {// nothing\n    }\n\n    var error = void 0;\n\n    if (typeof object.name === \"string\") {\n      var name_1 = object.name;\n      var des = deserializers[name_1];\n\n      if (des) {\n        error = des(object);\n      } else {\n        var constructor = name_1 === \"Error\" ? Error : errorClasses[name_1];\n\n        if (!constructor) {\n          console.warn(\"deserializing an unknown class '\" + name_1 + \"'\");\n          constructor = createCustomErrorClass(name_1);\n        }\n\n        error = Object.create(constructor.prototype);\n\n        try {\n          for (var prop in object) {\n            if (object.hasOwnProperty(prop)) {\n              error[prop] = object[prop];\n            }\n          }\n        } catch (e) {// sometimes setting a property can fail (e.g. .name)\n        }\n      }\n    } else {\n      error = new Error(object.message);\n    }\n\n    if (!error.stack && Error.captureStackTrace) {\n      Error.captureStackTrace(error, deserializeError);\n    }\n\n    return error;\n  }\n\n  return new Error(String(object));\n}; // inspired from https://github.com/sindresorhus/serialize-error/blob/master/index.js\n\nexport var serializeError = function (value) {\n  if (!value) return value;\n\n  if (typeof value === \"object\") {\n    return destroyCircular(value, []);\n  }\n\n  if (typeof value === \"function\") {\n    return \"[Function: \" + (value.name || \"anonymous\") + \"]\";\n  }\n\n  return value;\n}; // https://www.npmjs.com/package/destroy-circular\n\nfunction destroyCircular(from, seen) {\n  var e_1, _a;\n\n  var to = {};\n  seen.push(from);\n\n  try {\n    for (var _b = __values(Object.keys(from)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var value = from[key];\n\n      if (typeof value === \"function\") {\n        continue;\n      }\n\n      if (!value || typeof value !== \"object\") {\n        to[key] = value;\n        continue;\n      }\n\n      if (seen.indexOf(from[key]) === -1) {\n        to[key] = destroyCircular(from[key], seen.slice(0));\n        continue;\n      }\n\n      to[key] = \"[Circular]\";\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  if (typeof from.name === \"string\") {\n    to.name = from.name;\n  }\n\n  if (typeof from.message === \"string\") {\n    to.message = from.message;\n  }\n\n  if (typeof from.stack === \"string\") {\n    to.stack = from.stack;\n  }\n\n  return to;\n}","map":{"version":3,"mappings":"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","names":["errorClasses","deserializers","addCustomErrorDeserializer","name","deserializer","createCustomErrorClass","C","CustomError","message","fields","Object","assign","stack","Error","prototype","deserializeError","object","msg","JSON","parse","e","error","des","name_1","constructor","console","warn","create","prop","hasOwnProperty","captureStackTrace","String","serializeError","value","destroyCircular","from","seen","to","push","keys","_c","key","indexOf","slice"],"sourceRoot":"","sources":["../src/helpers.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}